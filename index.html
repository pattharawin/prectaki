<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pre-CT AKI Score Calculator</title>
  <meta name="description" content="Point-based score calculator to estimate risk category for contrast-associated AKI (CA-AKI) after contrast-enhanced CT. No inputs are stored." />
  <style>
    :root{
      --bg:#0b1220;
      --text:#e8edf6;
      --muted:#a9b4c7;
      --border:rgba(255,255,255,.10);
      --accent:#38bdf8;
      --accent2:#a78bfa;
      --warn:#f59e0b;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius:16px;
      --resultGlow: 0 0 0 7px rgba(56,189,248,.12), 0 16px 40px rgba(0,0,0,.50);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 20% 10%, rgba(56,189,248,.25), transparent 60%),
                  radial-gradient(900px 600px at 80% 20%, rgba(167,139,250,.18), transparent 55%),
                  linear-gradient(180deg, #070b14 0%, var(--bg) 60%, #070b14 100%);
      color:var(--text);
    }
    a{color:var(--text); text-decoration: underline; text-decoration-thickness: 1px; text-underline-offset: 3px;}
    .wrap{max-width:980px;margin:0 auto;padding:18px 14px 44px;}
    @media (min-width:720px){ .wrap{padding:22px 18px 54px;} }

    .header{
      border:1px solid var(--border);
      background: linear-gradient(135deg, rgba(56,189,248,.14), rgba(167,139,250,.10));
      border-radius: calc(var(--radius) + 6px);
      padding:18px 16px;
      box-shadow: var(--shadow);
      overflow:hidden;
      text-align:center; /* center everything in heading */
    }
    .logos{
      display:flex;align-items:center;justify-content:center;gap:14px;flex-wrap:wrap;
      padding:10px 12px;
      border-radius:18px;
      background: linear-gradient(135deg, rgba(255,255,255,1) 0%, rgba(255,255,255,.85) 40%, rgba(255,255,255,.35) 70%, rgba(255,255,255,0) 100%);
      border:1px solid rgba(255,255,255,.30);
      width:fit-content;
      margin: 0 auto 12px;
    }
    .logoBox{
      display:flex;align-items:center;justify-content:center;
      padding:8px 10px;
      border-radius:14px;
      background:#ffffff;
      border:1px solid rgba(0,0,0,.06);
    }
    .logoBox img{height:54px;width:auto;display:block;}

    h1{font-size:26px;margin:0 0 8px;letter-spacing:.2px;}
    @media (min-width:720px){ h1{font-size:30px;} }
    .sub{margin:0;color:var(--muted);line-height:1.45;font-size:14px;max-width:820px;margin-inline:auto;}

    .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:14px;}
    @media (min-width:900px){ .grid{grid-template-columns:1.15fr 0.85fr;} }

    .card{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(16,31,56,.90), rgba(15,27,49,.86));
      box-shadow: var(--shadow);
      padding:16px;
    }
    .card h2{font-size:16px;margin:0 0 10px;}

    label{display:block;font-weight:750;margin-top:12px;font-size:13px;color:var(--text);}
    .help{margin-top:6px;color:var(--muted);font-size:12px;line-height:1.35}
    select, input[type="number"]{
      width:100%;
      padding:11px 12px;
      margin-top:6px;
      border:1px solid rgba(255,255,255,.14);
      border-radius: 12px;
      background: rgba(7,11,20,.55);
      color: var(--text);
      outline: none;
      font-size:14px;
    }
    select:focus, input:focus{border-color: rgba(56,189,248,.65); box-shadow: 0 0 0 4px rgba(56,189,248,.12);}
    .inlinePoints{color:var(--muted);font-size:12px;margin-top:6px;}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
    button{
      appearance:none;border:1px solid rgba(255,255,255,.16);border-radius:14px;
      padding:10px 14px;font-weight:800;cursor:pointer;background: rgba(7,11,20,.55); color:var(--text);
      transition: transform .05s ease, border-color .2s ease, background .2s ease;
      flex:0 0 auto;
    }
    button:hover{border-color: rgba(56,189,248,.55);}
    button:active{transform: translateY(1px);}
    button.primary{
      background: linear-gradient(135deg, rgba(56,189,248,.95), rgba(167,139,250,.92));
      border-color: rgba(255,255,255,.14);
      color:#07111f;
    }
    button.ghost{background: rgba(7,11,20,.35);}
    @media (max-width:420px){ .actions button{flex:1 1 auto; width:100%;} }

    .resultCard{
      outline: 1px solid rgba(56,189,248,.24);
      box-shadow: var(--resultGlow);
    }
    /* Center the score + risk group block */
    .resultTop{
      text-align:center;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      margin-bottom:6px;
    }
    .big{
      font-size:46px;
      font-weight:950;
      letter-spacing:.3px;
      background: linear-gradient(135deg, rgba(56,189,248,1), rgba(167,139,250,1));
      -webkit-background-clip:text;background-clip:text;color:transparent;
      text-shadow: 0 0 18px rgba(56,189,248,.18);
      line-height:1.05;
    }
    @media (min-width:720px){ .big{font-size:52px;} }
    .lbl{color:var(--muted);font-size:12px;margin-top:6px;}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid rgba(255,255,255,.16);
      border-radius:999px;
      padding:9px 11px;
      background: rgba(7,11,20,.55);
      font-weight:900;
      font-size:12px;
      color:var(--text);
    }
    .pill .chip{width:10px;height:10px;border-radius:999px;background:var(--accent)}

    table{
      width:100%;border-collapse:separate;border-spacing:0;
      margin-top:12px;
      border:1px solid rgba(255,255,255,.16);
      border-radius:14px;
      overflow:hidden;
      background: rgba(7,11,20,.50);
    }
    th, td{padding:11px 12px;border-bottom:1px solid rgba(255,255,255,.10);text-align:left;}
    th{
      background: rgba(56,189,248,.10);
      color: #eaf5ff;
      font-size:12px;
      font-weight:950;
      letter-spacing:.2px;
    }
    td{font-size:14px;}
    tr:last-child td{border-bottom:none;}

    /* Make percentages most prominent (>= score prominence) */
    td.value{
      font-weight:1000;
      font-size:24px;  /* bigger */
      text-align:right;
      white-space:nowrap;
      color:#0b1220;
      background: linear-gradient(135deg, rgba(56,189,248,.98), rgba(167,139,250,.92));
      letter-spacing:.2px;
    }
    td.label{
      font-weight:850;
      color:#f2f6ff;
      background: rgba(255,255,255,.03);
    }
    @media (max-width:420px){
      td.value{font-size:20px;}
    }

    .warn{color:var(--warn);font-size:13px;font-weight:750;margin-top:10px;}
    .small{font-size:12px;color:var(--muted);line-height:1.45;}
    .foot{margin-top:12px;border-top:1px solid rgba(255,255,255,.10);padding-top:12px;}
    .req{color:rgba(56,189,248,.9);font-weight:900;margin-left:4px;}

    @media print{
      body{background:#fff;color:#000;}
      .header, .card{box-shadow:none;background:#fff;border:1px solid #ddd;}
      .actions{display:none !important;}
      .logos{background:#fff;border:1px solid #ddd;}
      .logoBox{border:1px solid #ddd;}
      select, input{border:1px solid #ddd;background:#fff;color:#000;}
      .big{color:#000 !important; -webkit-text-fill-color:#000 !important; text-shadow:none;}
      .pill{border:1px solid #ddd;background:#fff;color:#000;}
      table{border:1px solid #ddd;background:#fff;}
      th{background:#f3f4f6;color:#000;}
      td.value{background:#fff;color:#000;font-weight:900;font-size:22px;}
      td.label{background:#fff;color:#000;}
      td, th{border-bottom:1px solid #e5e7eb;}
      .small{color:#111;}
      a{color:#000;text-decoration:none;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="logos" aria-label="Institution logos">
        <div class="logoBox" title="Thammasat University Faculty of Medicine">
          <img src="TU.png" alt="Thammasat University Faculty of Medicine logo" />
        </div>
        <div class="logoBox" title="TUH">
          <img src="TUH.png" alt="TUH logo" />
        </div>
        <div class="logoBox" title="CICM">
          <img src="CICM.png" alt="CICM logo" />
        </div>
      </div>

      <h1>Pre-CT AKI Score</h1>
      <p class="sub">
        Point-based score calculator to estimate risk category for contrast-associated AKI (CA-AKI) after contrast-enhanced CT.<br/>
        No inputs are stored.
      </p>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Inputs</h2>

        <label for="sex">Sex <span class="req">*</span></label>
        <select id="sex">
          <option value="female">Female</option>
          <option value="male">Male</option>
        </select>
        <div class="inlinePoints" id="sexPts">Points: 0</div>

        <label for="setting">Setting <span class="req">*</span></label>
        <select id="setting">
          <option value="opd">OPD</option>
          <option value="nonicu">Non-ICU</option>
          <option value="icu">ICU</option>
        </select>
        <div class="inlinePoints" id="settingPts">Points: 0</div>

        <label for="hb">Hemoglobin (g/dL) <span class="req">*</span></label>
        <input id="hb" type="number" inputmode="decimal" step="0.1" min="0" max="25" placeholder="e.g., 11.2" />
        <div class="help">The score uses a threshold of hemoglobin &lt; 10 g/dL.</div>
        <div class="inlinePoints" id="hbPts">Points: —</div>

        <label for="egfrNum">eGFR (mL/min/1.73 m²) <span class="req">*</span></label>
        <input id="egfrNum" type="number" inputmode="decimal" step="1" min="0" max="200" placeholder="e.g., 68" />
        <div class="help" id="egfrCatHelp">Category: —</div>
        <div class="inlinePoints" id="egfrPts">Points: —</div>

        <div class="actions">
          <button class="primary" id="calcBtn" type="button">Calculate</button>
          <button id="resetBtn" type="button">Reset</button>
          <button class="ghost" id="printBtn" type="button" title="Print or Save as PDF">Print / Export PDF</button>
        </div>

        <div class="foot small">
          Abbreviations: CA-AKI, contrast-associated AKI; ICU, intensive care unit; OPD, outpatient department; KRT, kidney replacement therapy.
        </div>
      </div>

      <div class="card resultCard">
        <h2>Results</h2>

        <div class="resultTop">
          <div>
            <div class="big" id="totalScore">—</div>
            <div class="lbl">Total score (points)</div>
          </div>
          <span class="pill" id="riskGroup"><span class="chip"></span><span>Risk group: —</span></span>
        </div>

        <table aria-label="Predicted prevalence by risk group">
          <thead>
            <tr>
              <th>Outcome</th>
              <th style="text-align:right;">Estimated prevalence</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="label">CA-AKI (any stage)</td>
              <td class="value" id="p_any">—</td>
            </tr>
            <tr>
              <td class="label">CA-AKI stage 2–3</td>
              <td class="value" id="p_s23">—</td>
            </tr>
            <tr>
              <td class="label">CA-AKI requiring KRT</td>
              <td class="value" id="p_krt">—</td>
            </tr>
          </tbody>
        </table>

        <div class="warn" id="note"></div>

        <p class="small" style="margin-top:12px;">
          Reference: Pattharanitima P, Bumrungsong N, Phoompho B, Tanin R, Anumas S. Kidney360. 2025;6(1):49–57.
          DOI: <a href="https://pubmed.ncbi.nlm.nih.gov/39418104/" target="_blank" rel="noopener noreferrer">10.34067/KID.0000000623</a>.
        </p>
      </div>
    </div>
  </div>

  <script src="script.js"></script>

  
  <div class="card" style="margin-top:14px;">
    <h2>Definitions used in this calculator</h2>

    <p class="small" style="margin-top:8px;">
      <strong>eGFR equation:</strong> Estimated GFR was calculated using the <strong>2021 CKD-EPI creatinine equation</strong>.
    </p>

    <p class="small" style="margin-top:10px;">
      <strong>KDIGO AKI staging (serum creatinine criteria used in this project):</strong>
    </p>

    <table aria-label="KDIGO AKI staging by serum creatinine" style="margin-top:10px;">
      <thead>
        <tr>
          <th style="width:92px;">Stage</th>
          <th>Creatinine criteria (easy summary)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="label">1</td>
          <td class="label" style="font-weight:800;">
            Increase to <strong>1.5–1.9×</strong> baseline <em>OR</em> an absolute increase of <strong>≥0.3 mg/dL</strong> (≥26.5 μmol/L).
          </td>
        </tr>
        <tr>
          <td class="label">2</td>
          <td class="label" style="font-weight:800;">
            Increase to <strong>2.0–2.9×</strong> baseline.
          </td>
        </tr>
        <tr>
          <td class="label">3</td>
          <td class="label" style="font-weight:800;">
            Increase to <strong>≥3.0×</strong> baseline <em>OR</em> serum creatinine <strong>≥4.0 mg/dL</strong> (≥353.6 μmol/L) <em>OR</em> initiation of kidney replacement therapy.
          </td>
        </tr>
      </tbody>
    </table>

    <p class="small" style="margin-top:12px;">
      Feedback or report issues: <a href="mailto:kidney.bk@gmail.com">kidney.bk@gmail.com</a>
    </p>
  </div>

<script>
    var t = setInterval(function() {
        if (window.goatcounter && window.goatcounter.visit_count) {
            clearInterval(t)
            window.goatcounter.visit_count({append: 'body'})
        }
    }, 100)
</script>
<script data-goatcounter="https://pattharawin.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

<p class="sub" style="margin-top:20px;">
  Disclaimer: For research and educational purposes only. Clinical decisions should be based on professional judgment.
</p>


</body>
</html>
